from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.common.exceptions import NoSuchElementException
import time

# Inicia el navegador Chrome
print("ğŸŸ¢ Iniciando prueba de login con Selenium...")
driver = webdriver.Chrome()

try:
    # Abrir la URL del sistema
    print("ğŸŒ Abriendo pÃ¡gina de login...")
    driver.get("http://172.16.5.4/sgd/login.do")
    time.sleep(2)  # Esperar que cargue la pÃ¡gina

    # Completar los campos del formulario de login
    print("âœï¸ Ingresando usuario y contraseÃ±a...")
    driver.find_element(By.ID, "coUsuario").send_keys("admin")
    driver.find_element(By.ID, "dePass").send_keys("1234")

    # Hacer clic en el botÃ³n de ingreso
    print("â¡ï¸ Haciendo clic en el botÃ³n de login...")
    driver.find_element(By.XPATH, "//button[@type='submit']").click()
    time.sleep(3)  # Esperar a que cargue la siguiente pÃ¡gina

    # Verificar si el login fue exitoso
    print("ğŸ” Verificando si el login fue exitoso...")
    try:
        driver.find_element(By.XPATH, "//*[contains(text(), 'Bienvenido')]")
        print("âœ… Login exitoso.")
    except NoSuchElementException:
        print("âŒ Login fallido. Texto de bienvenida no encontrado.")

    # Tomar captura de pantalla
    print("ğŸ“¸ Guardando captura como 'resultado_login.png'...")
    driver.save_screenshot("resultado_login.png")

except Exception as e:
    print("âŒ Error durante la ejecuciÃ³n:")
    print(e)

finally:
    print("ğŸšª Cerrando navegador...")
    driver.quit()
